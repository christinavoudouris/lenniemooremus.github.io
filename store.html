<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Lennie Moore - Store</title>
		<meta
			name="description"
			content="The official webstore for composer Lennie Moore."
		/>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="color-scheme" content="light dark" />
		<link href="favicon.ico" rel="icon" type="image/x-icon" />
		<!-- BOOTSTRAP CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
			crossorigin="anonymous"
		/>
		<!-- CSS overrides -->
		<link rel="stylesheet" href="assets/style.css" />
		<!-- FONT AWESOME -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
			integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<!-- BOOTSTRAP JS -->
		<script
			defer
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
			crossorigin="anonymous"
		></script>
		<!-- our JS -->
		<script defer src="all.js"></script>
		<!-- PayPal JS -->
		<script defer src="index.js"></script>
	</head>
	<body>
		<main class="container">
			<div class="row">
				<div class="col-10">
					<h1>Store Under Construction</h1>
					<div class="blogitem">
						<p>&nbsp;</p>
						<h2>Item 1</h2>
						<p>&nbsp;</p>
					</div>
					<div class="blogitem">
						<p>&nbsp;</p>
						<h2>Item 2</h2>
						<p>&nbsp;</p>
					</div>
				</div>
				<div class="col-2 accordion" id="accordion8">
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button
								class="accordion-button"
								type="button"
								data-bs-toggle="collapse"
								data-bs-target="#collapseEight"
								aria-expanded="true"
								aria-controls="collapseEight"
							>
								Liner Notes
							</button>
						</h2>
						<div
							id="collapseEight"
							class="accordion-collapse collapse show"
							data-bs-parent="#accordion8"
						>
							<div class="accordion-body">
								<p>
									The Store is still under construction. It takes extra time to
									create tasteless promotional swag.
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
		<!-- PayPal store -->
			<script data-sdk-integration-source="integrationbuilder_ac"></script>
			<div id="paypal-button-container"></div>
			<script src="https://www.paypal.com/sdk/js?client-id=<test>"></script>
			<script>
				const FUNDING_SOURCES = [
				paypal.FUNDING.PAYPAL,
				paypal.FUNDING.VENMO,
				paypal.FUNDING.CARD
				];
				FUNDING_SOURCES.forEach(fundingSource => {
				paypal.Buttons({
				fundingSource,
				style: {
				layout: 'horizontal',
				shape: 'pill',
				color: (fundingSource==paypal.FUNDING.PAYLATER) ? 'gold' : '',
				},
				createOrder: async (data, actions) => {
				const response = await fetch("/orders", {
				method: "POST",
				});
				const details = await response.json();
				return details.id;
				},

				onApprove: async (data, actions) => {
				const response = await fetch(`/orders/${data.orderID}/capture`, {
				method: "POST",
				});
				const details = await response.json();
				// Three cases to handle:
				//   (1) Recoverable INSTRUMENT_DECLINED -> call actions.restart()
				//   (2) Other non-recoverable errors -> Show a failure message
				//   (3) Successful transaction -> Show confirmation or thank you

				// This example reads a v2/checkout/orders capture response, propagated from the server
				// You could use a different API or structure for your 'orderData'

				const errorDetail = Array.isArray(details.details) && details.details[0];
				if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
					return actions.restart(); // Recoverable state, per:
				// https://developer.paypal.com/docs/checkout/integration-features/funding-failure/
				}

				if (errorDetail) {
					let msg = 'Sorry, your transaction could not be processed.';
					if (errorDetail.description) msg += '\n\n' + errorDetail.description;
					if (details.debug_id) msg += ' (' + details.debug_id + ')';
					return alert(msg); // Show a failure message (try to avoid alerts in production environments)
				}

				// Successful capture! For demo purposes:
				console.log('Capture result', details, JSON.stringify(details, null, 2));
				const transaction = details.purchase_units[0].payments.captures[0];
				alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');
				},
				})
				.render("#paypal-button-container");
				})

			</script>

		<!-- Google tag (gtag.js) -->
			<script async src="https://www.googletagmanager.com/gtag/js?id=G-2E6KQ2CJGH"></script>
			<script>
				window.dataLayer = window.dataLayer || [];
  				function gtag(){dataLayer.push(arguments);}
  				gtag('js', new Date());

  				gtag('config', 'G-2E6KQ2CJGH');
			</script>
	</body>
</html>
